---
prometheus::manage_prometheus_server: true
prometheus::version: '2.29.1'
prometheus::scrape_configs:
  - job_name: 'prometheus'
    scrape_interval: '10s'
    scrape_timeout: '10s'
    static_configs:
      - targets:
          - 'localhost:9090'
        labels:
          alias: 'prometheus'
  - job_name: 'node_exporter'
    scheme: 'http'
    scrape_interval: '10s'
    scrape_timeout: '10s'
    consul_sd_configs:
    - server: 'consul-01.puppetdomain:8500'
      scheme: 'http'
      datacenter: 'vagrant'
      services:  ['node_exporter']
      tags:
      - 'node_exporter'